<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=11"/>
        <meta name="generator" content="Doxygen 1.9.3"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Orion » Debugging</title>
        <link rel="shortcut icon" href="../../icon_small.png">
        <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="../../jquery.js"></script>
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../general.css" rel="stylesheet" type="text/css"/>
<link href="../../sidebar.css" rel="stylesheet" type="text/css"/>
<link href="../../theme-toggle.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="../../theme-toggle.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeDarkModeToggle.init()
        </script>
        <script type="text/javascript" src="../../fragment-copy.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
        </script>
        <script type="text/javascript" src="../../paragraph-link.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeParagraphLink.init()
        </script>
    </head>
    <body>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
                <tbody>
                    <tr id="projectrow">
                        <td id="projectlogo"><a href=""><img alt="Logo" src="../../icon_small.png"/></a></td>
                        <td id="projectalign">
                            <div id="projectname">Orion<span id="projectnumber">&#160;master-devel</span>
                            </div>
                            <div id="projectbrief">Low-level Vulkan graphics library for C</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/d68/debugging.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Debugging </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_docs_pages_debugging"></a> This page refers to 'library' debugging; it is related to Orion errors and function returns, etc.</p>
<p >For more function-specific documentation, see <a class="el" href="../../d6/def/group__grp__core__errors.html">Core Orion functionality/Error handling</a>.</p>
<h1><a class="anchor" id="sct_debugging_callback"></a>
Debug callback</h1>
<p >Orion provides the ability to set your own debug callback, similar to OpenGL, Vulkan, GLFW, etc, and the library will push errors, warnings, and debugging information to this callback.</p>
<p >To use the debug callback and recieve debug messages, call the <a class="el" href="../../d6/def/group__grp__core__errors.html#ga4975c2c46702cae94c4c79a8fc813cc9" title="Enable Orion debug output and recieve any messages that fall under the specified criteria.">oriConfigureDebugMessages()</a> function at least once, specifying the types of messages you want to see. There is a <b>default, built-in callback function</b> which will be implicitly used, or you can set your own callback function with <a class="el" href="../../d6/def/group__grp__core__errors.html#gafe78fa14738716820c7c78190c9a3da6" title="Set the global Orion debug callback function.">oriSetDebugCallback()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Errors and fatal errors will <b>always</b> be output to console, regardless of debug message configuration.</dd></dl>
<p>For information regarding the expected function signature of the callback, and the meaning of the parameters, see <a class="el" href="../../d6/def/group__grp__core__errors.html#gaa0ccc58ad708fa019693ec832358f96c">oriDebugCallbackfun</a>. An example of a custom debug callback function can be seen below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> debugcbfun(</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *name,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> code,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *message,</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d6/def/group__grp__core__errors.html#ga3426e9a34335179e46f36915073c3f92">oriSeverityBit_t</a> severity,</div>
<div class="line">    <span class="keywordtype">void</span> *pointer</div>
<div class="line">) {</div>
<div class="line">    <span class="keywordtype">char</span> severitystr[256];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (severity) {</div>
<div class="line">        <span class="keywordflow">case</span> ORION_DEBUG_SEVERITY_VERBOSE_BIT:</div>
<div class="line">            snprintf(severitystr, 256, <span class="stringliteral">&quot;LOG&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> ORION_DEBUG_SEVERITY_NOTIF_BIT:</div>
<div class="line">            snprintf(severitystr, 256, <span class="stringliteral">&quot;NOTIFICATION&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> ORION_DEBUG_SEVERITY_WARNING_BIT:</div>
<div class="line">            snprintf(severitystr, 256, <span class="stringliteral">&quot;WARNING&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> ORION_DEBUG_SEVERITY_ERROR_BIT:</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            snprintf(severitystr, 256, <span class="stringliteral">&quot;ERROR&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> ORION_DEBUG_SEVERITY_FATAL_BIT:</div>
<div class="line">            snprintf(severitystr, 256, <span class="stringliteral">&quot;FATAL!&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;-----\nmessage: %s\ncode: %d (%s)\nseverity: %s\n&quot;</span>, message, code, name, severitystr);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__grp__core__errors_html_ga3426e9a34335179e46f36915073c3f92"><div class="ttname"><a href="../../d6/def/group__grp__core__errors.html#ga3426e9a34335179e46f36915073c3f92">oriSeverityBit_t</a></div><div class="ttdeci">oriSeverityBit_t</div><div class="ttdoc">The severity of a debug message.</div><div class="ttdef"><b>Definition:</b> orion.h:81</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Debug messages of type <em>VERBOSE</em>, <em>NOTIF</em>, and <em>WARNING</em> do not report <b>any</b> value to the <code>name</code> or <code>code</code> parameters.</dd></dl>
<p>You do not need to do any filtering in your callback, this is handled by the library already. But, of course, you could filter out specific error codes or names if you so wish. It's up to you.</p>
<p >The <code>pointer</code> parameter allows you to pass any value to your callback. You can specify this value in the call to <a class="el" href="../../d6/def/group__grp__core__errors.html#gafe78fa14738716820c7c78190c9a3da6" title="Set the global Orion debug callback function.">oriSetDebugCallback()</a>. Note that this parameter is not used in the default debug callback.</p>
<p >You can, at any point, set the debug callback to be <code>NULL</code>. <b>This will revert the program back to using the default, built-in debug callback.</b> You could then set your own callback again later.</p>
<h2><a class="anchor" id="sct_debugging_directcall"></a>
Directly calling the debug callback</h2>
<p >Whilst the debug callback is meant for use by the Orion API, you can also call it yourself using the <a class="el" href="../../d6/def/group__grp__core__errors.html#ga5c89351853a3509995f3f295e42542e2">oriGetDebugCallback()</a> function, which returns the callback.</p>
<p >As a sidenote, you can also retrieve the currently set user data with <a class="el" href="../../d6/def/group__grp__core__errors.html#ga6d069fc705f814ac761a2b599192223f">oriGetDebugCallbackUserData()</a>.</p>
<h2><a class="anchor" id="sct_debugging_vkdebugutils"></a>
Using the debug callback with Vulkan debug utils</h2>
<p >If you are using Vulkan debug utilities (<a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/VK_EXT_debug_utils.html">VK_EXT_debug_utils</a>), you may wish to call the Orion debug callback to then handle Vulkan messages there.</p>
<p >To <a class="el" href="../../dd/d68/debugging.html#sct_debugging_directcall">call the debug callback</a> for a Vulkan message, simply pass <code>"VULKAN_DEBUG_MESSENGER"</code> to the <code>name</code> parameter, and include <b>all</b> necessary information in the <code>message</code> parameter. You should also call the code as <code>0xA1</code>.</p>
<p >Of course, you can change this behaviour if you define your own debug callback. However, you should still check for <code>"VULKAN_DEBUG_MESSENGER"</code> as the name of any Vulkan-thrown debug messages, as it is what is documented in the <a class="el" href="../../db/d43/errors.html">Error index</a>.</p>
<p >Using this functionality, you could create a Vulkan debug messenger which concatenates all necessary information - such as severity, type, description, etc - into a string before calling the Orion debug callback as such:</p>
<div class="fragment"><div class="line"><span class="comment">// this is just an example - `message` is the aforementioned string containing all debug info</span></div>
<div class="line"><span class="comment">// you don&#39;t need to set the severity to ERROR, this just makes the message have higher priority</span></div>
<div class="line"><a class="code hl_function" href="../../d6/def/group__grp__core__errors.html#ga5c89351853a3509995f3f295e42542e2">oriGetDebugCallback</a>()(<span class="stringliteral">&quot;VULKAN_DEBUG_MESSENGER&quot;</span>, 0xA1, message, ORION_DEBUG_SEVERITY_ERROR_BIT, NULL);</div>
<div class="ttc" id="agroup__grp__core__errors_html_ga5c89351853a3509995f3f295e42542e2"><div class="ttname"><a href="../../d6/def/group__grp__core__errors.html#ga5c89351853a3509995f3f295e42542e2">oriGetDebugCallback</a></div><div class="ttdeci">const oriDebugCallbackfun oriGetDebugCallback()</div><div class="ttdoc">Get the current Orion debug callback function.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="sct_debugging_errorcodes"></a>
Error code specifications</h1>
<p >Whilst the contents of <em>VERBOSE</em>, <em>NOTIF</em>, and <em>WARNING</em> messages are 'magically' decided by whatever reported them, <em>ERROR</em> and <em>FATAL</em> messages are more standardised and as such there is a limited amount of potential errors, quanitifed by their respective codes and names.</p>
<p >For a list of error codes, please see the <a class="el" href="../../db/d43/errors.html#sct_errors_codes">Error index</a>.</p>
<h2><a class="anchor" id="sct_debugging_errorcodes_severities"></a>
Severities</h2>
<p >Errors are further categorised into severities, which can allow for filtering, which can be done by bit-masking them when passing to <a class="el" href="../../d6/def/group__grp__core__errors.html#ga4975c2c46702cae94c4c79a8fc813cc9" title="Enable Orion debug output and recieve any messages that fall under the specified criteria.">oriConfigureDebugMessages()</a>. No reported debug messages will have more than one severity bit enabled.</p>
<p >Error severities are represented by <a class="el" href="../../d6/def/group__grp__core__errors.html#ga3426e9a34335179e46f36915073c3f92">oriSeverityBit_t</a> enums.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">List of available error severities   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ORION_DEBUG_SEVERITY_FATAL_BIT   </td><td class="markdownTableBodyNone">Errors that the program <b>cannot</b> <b>recover</b> <b>from</b>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ORION_DEBUG_SEVERITY_ERROR_BIT   </td><td class="markdownTableBodyNone">Significant but (potentially) recoverable errors.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ORION_DEBUG_SEVERITY_WARNING_BIT   </td><td class="markdownTableBodyNone">Events that may cause problems, but are not directly too significant.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ORION_DEBUG_SEVERITY_NOTIF_BIT   </td><td class="markdownTableBodyNone">General events, no problems reported.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ORION_DEBUG_SEVERITY_VERBOSE_BIT   </td><td class="markdownTableBodyNone">Almost <b>every</b> event that is happening.   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>When specifying the shown severities in <a class="el" href="../../d6/def/group__grp__core__errors.html#ga4975c2c46702cae94c4c79a8fc813cc9" title="Enable Orion debug output and recieve any messages that fall under the specified criteria.">oriConfigureDebugMessages()</a>, you can specify the <code>ORION_DEBUG_SEVERITY_ALL_BIT</code> to specify all debug messages.</dd></dl>
<h1><a class="anchor" id="sct_debugging_disabling"></a>
Disabling debug output</h1>
<p >Outputting debug information causes a lot of string manipulation functions to be called by Orion, like strncpy() and snprintf(). If you want to avoid this, you can do so by <a class="el" href="../../index.html#sct_mainpage_radop">building with radical optimisation enabled</a>.</p>
<p >This method stops messages of <em>VERBOSE</em>, <em>NOTIF</em> and <em>WARNING</em> type from being processed. <b>Errors (message types <em>ERROR</em> and <em>FATAL</em>) will always be processed.</b> For information about the debug message types in Orion, see the <a class="el" href="../../dd/d68/debugging.html#sct_debugging_callback">Debug callback</a> section below.</p>
<dl class="section note"><dt>Note</dt><dd>Vulkan debug messengers are <b>not</b> be affected by this macro.</dd></dl>
<h1><a class="anchor" id="sct_debugging_returns"></a>
Function return statuses</h1>
<p >Aside from the debug callback, most Orion functions also return a <a class="el" href="../../d6/def/group__grp__core__errors.html#ga8a39b7359ee6621e9b557f3f33d4cb80">oriReturnStatus_t</a> enum that describes how their execution went. This isn't an advanced debugging tool, but rather a way for you to, for instance, exit the program if a function does not succeed.</p>
<p >When a function returns a non-OK status, it is usually accompanied by an appropriate debug message (sent to the debug callback).</p>
<p >For a list of possible function return status enums, see the <a class="el" href="../../db/d43/errors.html#sct_errors_returns">Error index</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/d43/errors.html">Error index</a> </dd>
<dd>
<a class="el" href="../../d6/def/group__grp__core__errors.html">Core/Error handling</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
        <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
            <ul>
                <li class="footer">doxygen <b>1.9.3</b> » documentation last built on <b>Mon Aug 22 2022</b> for <a href="https://github.com/kosude/orion_vk">m-master??</a></li>
            </ul>
        </div>
    </body>
</html>
